<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapport MONA Gaspard D.-M.</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="presentation">
        <h1 id="title">MONA Android<br>hiver 2023</h1>
        <h1 id="name">Gaspard Damoiseau-Malraux</h4>
    </div>
    <div class="content">
        <div class="subsection">
            <h1 class="subsection-header">
                <span>Semaine 1 (rendez-vous du 25/01)</span>
            </h1>
            <p class="subsection-paragraph">
                Rencontre de l'équipe et présentation du projet MONA par Lena via Zoom. Découverte des outils,
                des enjeux et des problématiques. <br>
                Utilisation de l'application Android pour un état des lieux de l'application. Téléchargement
                d'Android Studio, début d'apprentissage de Kotlin. <br>
            </p>
        </div>

        <div class="subsection">
            <h1 class="subsection-header">
                <span>Semaine 2 (rendez-vous du 01/02)</span>
            </h1>
            <p class="subsection-paragraph">
                Apprentissage du Kotlin, familiarisation avec le code de l'application ; je n'ai pas
                d'expérience en développement Android. Je lis les rapports des anciens étudiants pour
                avoir une idée globale. <br>
                Après quelques recherches, je doute qu'il soit plus facile de refaire une app avec
                <a href="https://reactjs.org/"><code>React.js</code></a> (trop de travail), mais j'ai vu
                <a href="https://ionicframework.com/"><code>Ionic</code></a> qui pourrait être intéressant. <br> <br>
                <u>Update lundi 6 :</u> j'ai patché le bug de l'oeuvre du jour (section vide, à cause d'une sélection
                aléatoire invalide d'une oeuvre), qui menait au crash de l'application si l'on essayait depuis
                la page de l'oeuvre du jour de :
            </p>
                <ul>
                    <li>Prendre une photo ;</li>
                    <li>Cibler l'oeuvre d'art ;</li>
                    <li>Accéder à son emplacement sur la carte.</li>
                </ul>
            <p>
                En fait, l'ancien code déterminait l'ID de l'oeuvre en partant du numéro de mois notamment, et
                le divisait par 2. Cependant les mois de janvier et février ont les numéros respectifs 0 et 1,
                et la division euclidienne par 2 renvoie donc 0 pour ces deux-là, ce qui mène à un
                <code>ID = 0</code>, qui est bien sûr invalide. J'ai décidé de déterminer l'ID de l'oeuvre en
                initialisant un RNG (Random Number Generator) avec une <em>seed</em> unique dans le temps
                <code>(JOUR_ANNEE * 10000 + ANNEE)</code>, puis en générant un entier entre 1 et la taille de la DB des
                oeuvres. <br>
                Je vais essayer de résoudre le problème de caméra qui affecte les Google Pixel d'ici mercredi 8
                prochain. <br>
                <br> <br>
                <u>Update mardi 7 :</u> j'ai résolu le problème de l'appareil photo cassé sur les Google Pixel !
                Le problème était causé par une mauvaise syntaxe de la fonction
                <code>dispatchTakePictureIntent</code> de la classe <code>OeuvreJourFragment</code>. Normalement
                le problème ne devrait plus réapparaître.<br> <br>
                <u>Update mardi 7, plus tard :</u> il semblerait que le bug persiste hors du contexte de
                l'oeuvre du jour... Le problème, c'est que je n'arrive pas à déterminer la section qui gère ce
                bouton. <br> <br>
                <u>Update mardi 7 (encore) :</u> j'ai enfin réussi à supprimer l'exception levée à l'obtention
                de certains badges ! Il arrivait qu'un booléen soit <code>null</code> ce qui levait une
                exception d'assertion.
            </p>
        </div>

        <div class="subsection">
            <h1 class="subsection-header">
                <span>Semaine 3 (rendez-vous du 8/02)</span>
            </h1>
            <p class="subsection-paragraph">
                À la dernière réunion, on a discuté d'une réécriture complète de l'application, en
                Kotlin ou probablement dans un autre langage avec l'aide d'un framework : quitte à
                devoir réécrire le code en vue de la migration vers l'API v3, ce serait peut-être
                une bonne occasion pour faire table rase. <br>
                Lena m'a chargé de faire un comparatif des frameworks/langages du marché pour se faire
                une idée et potentiellement en choisir un. On tombe assez rapidement sur 3
                possibilités : <a href="https://flutter.dev/">Flutter</a>,
                <a href="https://reactnative.dev/">React Native</a> et <a href="https://ionicframework.com/">Ionic</a>.
            </p>

            <table>
                <thead>
                    <tr>
                        <th></td>
                        <th>Ionic</td>
                        <th>React Native</td>
                        <th>Flutter</td>
                        <th>Kotlin</td>
                        <th>Swift</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Performances</td>
                        <td>Bonnes</td>
                        <td>Bonnes</td>
                        <td>Très bonnes</td>
                        <td>Maximales</td>
                        <td>Maximales</td>
                    </tr>
                    <tr>
                        <td>Taille APK <em>"Hello world!"</em></td>
                        <td>3500 Ko</td>
                        <td>7000 Ko</td>
                        <td>7500 Ko</td>
                        <td>550 Ko</td>
                        <td>??</td>
                    </tr>
                    <tr>
                        <td>Avantage particulier</td>
                        <td>Très facile à apprendre, multi-plateforme</td>
                        <td>Utile pour le multi-plateforme proche des éléments natifs</td>
                        <td>Agréable à développer, performant</td>
                        <td>Natif, 100% compatible JVM, performant</td>
                        <td>Natif, facile à développer, performant</td>
                    </tr>
                    <tr>
                        <td>Désavantage particulier</td>
                        <td>Peu adapté aux projets de grande échelle</td>
                        <td>Apprendissage relativement difficile</td>
                        <td>Nécessite la connaissance de Dart</td>
                        <td>Verbeux, contraignant, assez laid</td>
                        <td>Exclusif aux produits Apple</td>
                    </tr>
                </tbody>
            </table>
            <p>
                Tous les langages/frameworks peuvent utiliser les composants de
                l'appareil, caméra, GPS ou stockage. J'ai un peu de mal à saisir la
                différence entre Ionic et React Native, mais je crois qu'alors que
                React Native manipule des éléments natifs par une sous-couche Kotlin
                (et passe par le JS pour l'implémentation), Ionic utilise un arbre DOM,
                en HTML couplé au CSS pour le rendu ; cela vient avec tous les défauts
                et qualités du Web, notamment pour les performances. <br>
                Cependant, le <a href="https://ionic.io/blog/ionic-vs-react-native-performance-comparison">post de blog de Ionic</a>
                (et malgré son biais évident), montre que les performances des deux se
                valent, voire une meilleure utilisation GPU d'Ionic selon l'analyseur
                de Xcode. <br><br>
                <u>Update vendredi 10 :</u> j'ai essayé de reproduire l'interface de base
                de l'application sur Ionic. Ca semble assez facile, bien que la tentative
                reste très simple et se limite à l'interface.
            </p>

            <div class="media">
                <video playsinline autoplay muted loop src="ionic-proofofconcept-1.mp4"></video>
            </div>

            <p>
                <u>Update mardi 14 :</u> l'application se souvient maintenant de la position de
                la carte et de son niveau niveau de Zoom avant d'accéder aux détails d'une oeuvre.
                Plus besoin de se déplacer parce qu'on a perdu l'endroit qu'on observait ! J'ai mis
                la nouvelle version de MONA en test interne, normalement les testeurs y ont accès. <br>
                J'ai beaucoup amélioré les performances lorsqu'on veut accéder aux détails d'une
                oeuvre, si bien que il est maintenant rare qu'on remarque un délai. En revanche il
                arrive quand même que ça prenne du temps, donc je vais essayer d'implémenter une
                fenêtre d'alerte pour informer l'utilisateur du chargement.
            </p>
        </div>
    </div>
</body>
</html>
